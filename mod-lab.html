<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Modular Reduction Lab</title>

<style>

body {
    background: #0d1117;
    color: #00ff99;
    font-family: "Courier New", monospace;
    margin: 0;
}

.container {
    max-width: 900px;
    margin: auto;
    padding: 40px;
}

h1 {
    text-align: center;
    color: #00ffcc;
}

.subtitle {
    text-align: center;
    margin-bottom: 30px;
}

.card {
    background: #161b22;
    padding: 20px;
    margin-bottom: 20px;
    border-radius: 8px;
    box-shadow: 0 0 15px rgba(0,255,150,0.1);
}

label {
    display: block;
    margin-top: 10px;
}

input {
    width: 100%;
    padding: 8px;
    margin-top: 5px;
    background: #0d1117;
    border: 1px solid #00ff99;
    color: #00ff99;
}

button {
    margin-top: 15px;
    padding: 10px;
    width: 100%;
    background: #00ff99;
    border: none;
    cursor: pointer;
    font-weight: bold;
}

button:hover {
    background: #00cc77;
}

.output {
    height: 350px;
    overflow-y: auto;
}

pre {
    white-space: pre-wrap;
}

.result-box {
    margin-top: 15px;
    padding: 10px;
    background: #0d1117;
    border: 1px solid #00ff99;
}

</style>
</head>

<body>

<div class="container">

<h1>üßÆ Modular Reduction Lab</h1>
<p class="subtitle">Visualizaci√≥n paso a paso del c√°lculo de m√≥dulo</p>

<div class="card">

<label>N√∫mero</label>
<input type="text" id="number" value="123456789">

<label>M√≥dulo</label>
<input type="number" id="modulus" value="9">

<button onclick="calculate()">Calcular</button>

</div>

<div class="card">
<h2>Resultados</h2>
<div class="result-box" id="summary"></div>
</div>

<div class="card output">
<h2>Proceso Paso a Paso</h2>
<pre id="log"></pre>
</div>

</div>

<script>

function calculate() {

    const numberStr = document.getElementById("number").value;
    const modulus = BigInt(document.getElementById("modulus").value);
    const log = document.getElementById("log");
    const summary = document.getElementById("summary");

    log.textContent = "";
    summary.innerHTML = "";

    if (modulus === 0n) {
        logMessage("Error: El m√≥dulo no puede ser 0");
        return;
    }

    let number = BigInt(numberStr);

    // -------- M√âTODO DIRECTO --------
    let startDirect = performance.now();
    let resultDirect = number % modulus;
    let endDirect = performance.now();
    let timeDirect = (endDirect - startDirect).toFixed(4);

    // -------- M√âTODO DIGITO A DIGITO --------
    let startIter = performance.now();

    let resultIter = 0n;
    let operations = 0;

    logMessage("=== M√âTODO DIGITO A DIGITO ===");
    logMessage("--------------------------------");

    for (let i = 0; i < numberStr.length; i++) {

        let digit = BigInt(numberStr[i]);
        resultIter = (resultIter * 10n + digit) % modulus;
        operations++;

        if (i < 15) {
            logMessage(`Paso ${i+1}: resto = ${resultIter}`);
        }
    }

    let endIter = performance.now();
    let timeIter = (endIter - startIter).toFixed(4);

    logMessage("");
    logMessage("================================");

    summary.innerHTML = `
    <b>Resultado final:</b> ${resultDirect}<br><br>
    <b>M√©todo directo:</b><br>
    Tiempo: ${timeDirect} ms<br><br>
    <b>M√©todo iterativo (seguro para n√∫meros enormes):</b><br>
    Operaciones: ${operations}<br>
    Tiempo: ${timeIter} ms<br><br>
    <b>Tama√±o del n√∫mero:</b> ${numberStr.length} d√≠gitos<br>
    <b>Tama√±o en bits:</b> ${number.toString(2).length} bits
    `;
}

function logMessage(message) {
    const log = document.getElementById("log");
    log.textContent += message + "\n";
}

</script>

</body>
</html>
